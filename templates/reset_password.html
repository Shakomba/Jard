{% extends "base.html" %}
{% block content %}
<style>
  .field-error {
    border-color: #FF453A !important;
    outline: 2px solid rgba(255, 69, 58, 0.4) !important;
    outline-offset: 0px !important;
  }
  .field-error:focus {
    outline: 2px solid rgba(255, 69, 58, 0.6) !important;
    box-shadow: 0 0 0 3px rgba(255, 69, 58, 0.2) !important;
  }
  .shake {
    animation: shake 0.28s ease-in-out;
  }
  @keyframes shake {
    0% { transform: translateX(0); }
    25% { transform: translateX(-4px); }
    50% { transform: translateX(4px); }
    75% { transform: translateX(-3px); }
    100% { transform: translateX(0); }
  }
  .error-message {
    color: #ff4444 !important;
    font-weight: 500 !important;
  }

  /* Force label alignment based on language */
  label[dir="rtl"] {
    text-align: right !important;
  }
  label[dir="ltr"] {
    text-align: left !important;
  }
</style>
<div class="min-h-screen flex items-center justify-center px-4">
  <div class="card rounded-3xl p-8 w-full max-w-md">
    <div class="h-32 w-32 mx-auto mb-6">
      <img src="{{ url_for('static', filename='LogoDark.png') }}" alt="{{ t('common.logo') }}" class="h-full w-full object-contain dark-logo">
      <img src="{{ url_for('static', filename='LogoLight.png') }}" alt="{{ t('common.logo') }}" class="h-full w-full object-contain light-logo hidden">
    </div>

    <div class="text-center">
      <h1 class="text-3xl font-bold mb-6">{{ t('reset.title') }}</h1>
    </div>

  <form class="mt-6 space-y-4" method="post" action="{{ url_for('reset_password_post', token=token) }}">
    <div>
      <label style="text-align: {{ 'right' if lang == 'ku' else 'left' }} !important;" class="block w-full text-sm text-slate-200" dir="{{ 'rtl' if lang == 'ku' else 'ltr' }}">{{ t('reset.password_label') }}</label>
      <div class="relative">
        <input id="resetPassword" name="password" type="password" required autocomplete="new-password"
               class="mt-1 w-full h-12 px-4 py-3 pr-12 rounded-2xl input focus:outline-none focus:ring-2 focus:ring-violet-400"
               placeholder="{{ t('register.password_placeholder') }}" dir="ltr" />
        <button type="button" class="no-hover absolute right-3 top-1/2 -translate-y-1/2 p-2 text-slate-400 transition outline-none" onclick="togglePassword('resetPassword', this)">
          <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path class="eye-open" stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
            <path class="eye-open" stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
            <path class="eye-closed hidden" stroke-linecap="round" stroke-linejoin="round" d="M3 3l18 18M10.584 10.587a2 2 0 002.828 2.83M9.363 5.365A9.466 9.466 0 0112 5c4.478 0 8.268 2.943 9.542 7a9.716 9.716 0 01-1.676 2.635m-1.224 1.224A9.467 9.467 0 0112 19c-4.477 0-8.268-2.943-9.542-7a9.716 9.716 0 011.676-2.635"/>
          </svg>
        </button>
      </div>
    </div>

    <div>
      <label style="text-align: {{ 'right' if lang == 'ku' else 'left' }} !important;" class="block w-full text-sm text-slate-200" dir="{{ 'rtl' if lang == 'ku' else 'ltr' }}">{{ t('reset.confirm_password_label') }}</label>
      <div class="relative">
        <input id="resetConfirmPassword" name="confirm_password" type="password" required autocomplete="new-password"
               class="mt-1 w-full h-12 px-4 py-3 pr-12 rounded-2xl input focus:outline-none focus:ring-2 focus:ring-violet-400"
               placeholder="{{ t('register.password_placeholder') }}" dir="ltr" />
        <button type="button" class="no-hover absolute right-3 top-1/2 -translate-y-1/2 p-2 text-slate-400 transition outline-none" onclick="togglePassword('resetConfirmPassword', this)">
          <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path class="eye-open" stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
            <path class="eye-open" stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
            <path class="eye-closed hidden" stroke-linecap="round" stroke-linejoin="round" d="M3 3l18 18M10.584 10.587a2 2 0 002.828 2.83M9.363 5.365A9.466 9.466 0 0112 5c4.478 0 8.268 2.943 9.542 7a9.716 9.716 0 01-1.676 2.635m-1.224 1.224A9.467 9.467 0 0112 19c-4.477 0-8.268-2.943-9.542-7a9.716 9.716 0 011.676-2.635"/>
          </svg>
        </button>
      </div>
    </div>

    <button class="w-full py-3 rounded-2xl bg-violet-500 hover:bg-violet-400 transition font-semibold">
      {{ t('reset.submit_button') }}
    </button>
  </form>
</div>
</div>
{% endblock %}
